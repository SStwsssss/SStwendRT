<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>–†–µ–¥–∞–∫—Ç–æ—Ä code</title>
</head>
<body>
  <h3>–ö–æ–¥ –¥–ª—è Roblox:</h3>
  <textarea id="code" rows="10" cols="60" placeholder="–í–≤–µ–¥–∏—Ç–µ Lua-–∫–æ–¥">–ó–∞–≥—Ä—É–∑–∫–∞...</textarea><br><br>
  <button onclick="save()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
  <p id="status">–û–∂–∏–¥–∞–Ω–∏–µ...</p>

  <script>
    const url = "https://code-e0de9-default-rtdb.firebaseio.com/code.json";
    const textarea = document.getElementById("code");
    const status = document.getElementById("status");

    // üîÅ –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
    fetch(url)
      .then(r => {
        if (r.ok) return r.json();
        throw new Error("–Ω–µ –Ω–∞–π–¥–µ–Ω–æ");
      })
      .then(data => {
        textarea.value = typeof data === "string" ? data : "";
        status.innerText = "‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ";
      })
      .catch(() => {
        textarea.value = "";
        status.innerText = "üÜï –ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ –∫–æ–¥–∞";
      });

    // üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
    function save() {
      const content = textarea.value;
      fetch(url, {
        method: "PUT",
        body: JSON.stringify(content),
        headers: { "Content-Type": "application/json" }
      })
      .then(r => {
        status.innerText = r.ok ? "‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!" : "‚ùå –û—à–∏–±–∫–∞: " + r.status;
      });
    }
  </script>
</body>
</html>
