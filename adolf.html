<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–í–æ–∑—Ä–∞—Å—Ç –∞–∫–∫–∞—É–Ω—Ç–∞ Roblox</title>
  <style>
    body {
      background: #121212;
      color: #f0f0f0;
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
      margin: 0;
    }
    .container {
      max-width: 600px;
      margin: 40px auto;
      background: #1e1e1e;
      padding: 24px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
    }
    input, button {
      background: #2a2a2a;
      color: #e0e0e0;
      border: 1px solid #444;
      padding: 10px 16px;
      font-size: 16px;
      border-radius: 4px;
      width: 100%;
      box-sizing: border-box;
      margin-bottom: 12px;
    }
    button {
      background: #333;
      cursor: pointer;
      font-weight: bold;
    }
    button:hover {
      background: #444;
    }
    #result {
      margin-top: 20px;
      padding: 16px;
      background: #252525;
      border-radius: 6px;
      white-space: pre-wrap;
    }
    .error { color: #ff6b6b; }
    .success { color: #4ecdc4; }
  </style>
</head>
<body>
  <div class="container">
    <h2>üìÖ –í–æ–∑—Ä–∞—Å—Ç –∞–∫–∫–∞—É–Ω—Ç–∞ Roblox</h2>
    <p>–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (username), —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø—Ä–æ—à–ª–æ —Å –º–æ–º–µ–Ω—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.</p>
    <input type="text" id="username" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: builderman" autocomplete="off" />
    <button onclick="checkAccountAge()">üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    <div id="result"></div>
  </div>

  <script>
    async function checkAccountAge() {
      const username = document.getElementById('username').value.trim();
      const resultDiv = document.getElementById('result');
      
      if (!username) {
        resultDiv.innerHTML = '<span class="error">‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.</span>';
        return;
      }

      resultDiv.innerHTML = '‚è≥ –ó–∞–ø—Ä–æ—Å –∫ Roblox API...';

      try {
        // 1. –ü–æ–ª—É—á–∞–µ–º userId –ø–æ username
        const batchRes = await fetch('https://users.roblox.com/v1/usernames/users', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            usernames: [username],
            excludeBannedUsers: false
          })
        });

        if (!batchRes.ok) throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–≤—è–∑–∞—Ç—å—Å—è —Å API Roblox');

        const batchData = await batchRes.json();
        const user = batchData.data[0];

        if (!user || !user.id) {
          resultDiv.innerHTML = `<span class="error">‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "${username}" –Ω–µ –Ω–∞–π–¥–µ–Ω.</span>`;
          return;
        }

        // 2. –ü–æ–ª—É—á–∞–µ–º –¥–µ—Ç–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        const userRes = await fetch(`https://users.roblox.com/v1/users/${user.id}`);
        if (!userRes.ok) throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
        const userData = await userRes.json();

        const createdAt = new Date(userData.created);
        const now = new Date();
        const diffTime = Math.abs(now - createdAt);
        const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));

        const formattedDate = createdAt.toLocaleDateString('ru-RU', {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        });

        resultDiv.innerHTML = `
          <span class="success">‚úÖ –ê–∫–∫–∞—É–Ω—Ç: <b>${username}</b></span>\n
          üìÖ –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: ${formattedDate}\n
          üïí –ü—Ä–æ—à–ª–æ –¥–Ω–µ–π: <b>${diffDays}</b>\n
          üîó –°—Å—ã–ª–∫–∞: <a href="https://www.roblox.com/users/${user.id}/profile" target="_blank">–ü—Ä–æ—Ñ–∏–ª—å</a>
        `.replace(/\n/g, '<br>');
      } catch (err) {
        console.error(err);
        resultDiv.innerHTML = `<span class="error">‚ùå –û—à–∏–±–∫–∞: ${err.message}</span>`;
      }
    }

    // Enter ‚Üí submit
    document.getElementById('username').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') checkAccountAge();
    });
  </script>
</body>
</html>
