<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ code.lua</title>
  <!-- –ó–∞–≥—Ä—É–∑–∫–∞ Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
</head>
<body>
  <h2>–†–µ–¥–∞–∫—Ç–æ—Ä code.lua</h2>
  <textarea id="text" rows="10" cols="60" placeholder="–í–≤–µ–¥–∏ –∫–æ–¥ Lua"></textarea><br><br>
  <button onclick="save()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ code.lua</button>
  <p id="status">‚è≥ –ó–∞–≥—Ä—É–∂–∞–µ–º...</p>

  <script>

    const firebaseConfig = {
      apiKey: "AIzaSyDUMiSbLLXsUGOrJKes-RA3ARQyoKw1Udw",
      authDomain: "wddwaadw.firebaseapp.com",
      projectId: "wddwaadw",
      storageBucket: "wddwaadw.firebasestorage.app",
      messagingSenderId: "1088113077132",
      appId: "1:1088113077132:web:22edd3cf5609b3c42184a9",
      measurementId: "G-STTH4XCQHM"
    };

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const docRef = db.collection("scripts").doc("code.lua");

    // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    docRef.get().then(doc => {
      const status = document.getElementById("status");
      if (doc.exists && doc.data().content) {
        document.getElementById("text").value = doc.data().content;
        status.textContent = "‚úÖ code.lua –∑–∞–≥—Ä—É–∂–µ–Ω";
      } else {
        status.textContent = "üÜï –ü—É—Å—Ç–æ–π (code.lua –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–Ω)";
      }
    }).catch(err => {
      document.getElementById("status").textContent = "‚ùå –û—à–∏–±–∫–∞: " + err.message;
    });

    // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
    function save() {
      const content = document.getElementById("text").value;
      docRef.set({ content: content })
        .then(() => {
          document.getElementById("status").textContent = "‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ Firestore!";
        })
        .catch(err => {
          document.getElementById("status").textContent = "‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: " + err.message;
        });
    }
  </script>
</body>
</html>
