<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Lua Editor ‚Äî –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ code.lua</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      max-width: 800px;
      margin: 30px auto;
      padding: 20px;
      background: #fafafa;
    }
    h2 { color: #333; }
    textarea {
      width: 100%;
      height: 300px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      resize: vertical;
    }
    .controls { margin-top: 10px; }
    button {
      padding: 8px 16px;
      margin-right: 8px;
      font-size: 14px;
      cursor: pointer;
      border: none;
      border-radius: 4px;
    }
    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    .saved-overlay {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(240, 240, 240, 0.7);
      border-radius: 4px;
      pointer-events: none;
    }
    .saved-indicator {
      position: absolute;
      top: 5px;
      right: 10px;
      font-size: 12px;
      color: #666;
      background: #e0e0e0;
      padding: 2px 6px;
      border-radius: 3px;
    }
  </style>
</head>
<body>
  <h2>üìù Lua-—Ä–µ–¥–∞–∫—Ç–æ—Ä –¥–ª—è Roblox</h2>
  <p>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ ‚Üí –æ–Ω –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –∏ –∑–∞–ø–∏—à–µ—Ç—Å—è –≤ <code>code.lua</code>.<br>
     –ù–∞–∂–º–∏—Ç–µ ¬´‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å¬ª, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å.</p>

  <div style="position: relative;">
    <textarea id="luaInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: print('–ü—Ä–∏–≤–µ—Ç –∏–∑ Roblox!')">-- –í–∞—à Lua-–∫–æ–¥ –∑–¥–µ—Å—å
print("–ó–∞–ø—É—Å–∫...")
game.StarterGui:SetCore("SendNotification", {
    Title = "–£—Å–ø–µ—Ö!",
    Text = "–ö–æ–¥ –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω!",
    Duration = 4
})</textarea>
    <div id="overlay" style="display: none;">
      <div class="saved-overlay"></div>
      <div class="saved-indicator">üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</div>
    </div>
  </div>

  <div class="controls">
    <button id="saveBtn" onclick="saveCode()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    <button id="editBtn" onclick="editCode()" disabled>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
  </div>

  <script>
    const input = document.getElementById('luaInput');
    const overlay = document.getElementById('overlay');
    const saveBtn = document.getElementById('saveBtn');
    const editBtn = document.getElementById('editBtn');

    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –∫–æ–¥ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
    window.onload = () => {
      const saved = localStorage.getItem('robloxLuaCode');
      if (saved) {
        input.value = saved;
        setSavedState(true);
      }
    };

    function setSavedState(saved = false) {
      if (saved) {
        overlay.style.display = 'block';
        input.setAttribute('readonly', 'true');
        input.style.backgroundColor = '#f5f5f5';
        saveBtn.disabled = true;
        editBtn.disabled = false;
      } else {
        overlay.style.display = 'none';
        input.removeAttribute('readonly');
        input.style.backgroundColor = '#fff';
        saveBtn.disabled = false;
        editBtn.disabled = true;
      }
    }

    function saveCode() {
      const code = input.value;
      if (!code.trim()) {
        alert('‚ö†Ô∏è –ö–æ–¥ –ø—É—Å—Ç–æ–π!');
        return;
      }

      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
      localStorage.setItem('robloxLuaCode', code);

      // –°–∫–∞—á–∏–≤–∞–µ–º –∫–∞–∫ code.lua
      const blob = new Blob([code], { type: 'text/plain;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'code.lua';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ —Ä–µ–∂–∏–º "—Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ"
      setSavedState(true);
      alert('‚úÖ –ö–æ–¥ —Å–æ—Ö—Ä–∞–Ω—ë–Ω!\n–§–∞–π–ª code.lua —Å–∫–∞—á–∞–Ω.\n–ü–æ–ª–æ–∂–∏—Ç–µ –µ–≥–æ –≤ –ø–∞–ø–∫—É –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ GitHub Pages.');
    }

    function editCode() {
      setSavedState(false);
      input.focus();
    }
  </script>
</body>
</html>
